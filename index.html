<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        body {
            margin: 0px !important;
        }

        canvas {
            border: 1px solid #d3d3d3;
            background-color: #f1f1f1;
            width: 100vw !important;
            height: 100vh !important;
            /* display: block !important; */
        }

        .controlContainer {
            display: grid;
            grid-template-rows: 1fr;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-areas: '. control .';
            width: 100vw;
            position: fixed;
            bottom: 0;
            z-index: 1;
        }

        .controlArea {
            display: grid;
            grid-template-columns: fit-content(200px) fit-content(200px) fit-content(200px);
            grid-template-rows: fit-content(200px) fit-content(200px);
            grid-template-areas: '. up .'
                'left down right';
            width: 30vw !important;
            text-align: center;
            grid-area: control;
            gap: 10px;
            justify-content: center;
        }

        .controlButton {
            position: relative;
        }

        .arrow {
            position: absolute;
            top: 35%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 4vw;
            fill: #fff;
        }

        .controlButton img {
            width: 5vw !important;
        }

        .controlButton:hover {
            cursor: pointer;
        }

        .moveUp {
            grid-area: up;
        }

        .moveDown {
            grid-area: down;
        }

        .moveLeft {
            grid-area: left;
        }

        .moveRight {
            grid-area: right;
        }
    </style>
</head>

<body onload="startGame()">
    <script>

        var myGamePiece;

        function startGame() {
            myGamePiece = new component(329, 249, "./images/goose.png", 100, 120, "image");
            myGameArea.start();
        }

        var myGameArea = {
            canvas: document.createElement("canvas"),
            start: function () {
                this.canvas.width = document.documentElement.clientWidth;
                this.canvas.height = document.documentElement.clientHeight;
                this.context = this.canvas.getContext("2d");
                document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                this.interval = setInterval(updateGameArea, 20);
            },
            clear: function () {
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }
        }

        function component(width, height, color, x, y, type) {
            this.type = type;
            if (type == "image") {
                this.image = new Image();
                this.image.src = color;
            }
            this.width = width;
            this.height = height;
            this.speedX = 0;
            this.speedY = 0;
            this.x = x;
            this.y = y;
            this.update = function () {
                ctx = myGameArea.context;
                if (type == "image") {
                    ctx.drawImage(this.image,
                        this.x,
                        this.y,
                        this.width, this.height);
                } else {
                    ctx.fillStyle = color;
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                }
                // ctx.fillStyle = color;
                // ctx.fillRect(this.x, this.y, this.width, this.height);
            }
            this.newPos = function () {
                this.x += this.speedX;
                this.y += this.speedY;
            }
        }

        function updateGameArea() {
            myGameArea.clear();
            myGamePiece.newPos();
            myGamePiece.update();
        }

        function moveup() {
            myGamePiece.speedY = -1;
        }

        function movedown() {
            myGamePiece.speedY = 1;
        }

        function moveleft() {
            myGamePiece.speedX = -1;
        }

        function moveright() {
            myGamePiece.speedX = 1;
        }

        function clearmove() {
            myGamePiece.speedX = 0;
            myGamePiece.speedY = 0;
        }
    </script>
    <div class="controlContainer">
        <div class="controlArea">
            <div class="moveUp controlButton" onmousedown="moveup()" onmouseup="clearmove()" ontouchstart="moveup()">
                <img src="./images/button.png" />
                <svg class="arrow" viewBox="0 0 10 10">
                    <g transform="rotate(0, 5,5)">
                        <path d="M5,4 L7,6 L3,6 L5,4" />
                    </g>
                </svg>
            </div>
            <div class="moveLeft controlButton" onmousedown="moveleft()" onmouseup="clearmove()"
                ontouchstart="moveleft()">
                <img src="./images/button.png" />
                <svg class="arrow" viewBox="0 0 10 10">
                    <g transform="rotate(-90, 5,5)">
                        <path d="M5,4 L7,6 L3,6 L5,4" />
                    </g>
                </svg>
            </div>
            <div class="moveRight controlButton" onmousedown="moveright()" onmouseup="clearmove()"
                ontouchstart="moveright()">
                <img src="./images/button.png" />
                <svg class="arrow" viewBox="0 0 10 10">
                    <g transform="rotate(90, 5,5)">
                        <path d="M5,4 L7,6 L3,6 L5,4" />
                    </g>
                </svg>
            </div>
            <div class="moveDown controlButton" onmousedown="movedown()" onmouseup="clearmove()"
                ontouchstart="movedown()">
                <img src="./images/button.png" />
                <svg class="arrow" viewBox="0 0 10 10">
                    <g transform="rotate(180, 5,5)">
                        <path d="M5,4 L7,6 L3,6 L5,4" />
                    </g>
                </svg>
            </div>
        </div>
    </div>
</body>

</html>